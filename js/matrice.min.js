function g(a,b,c){this.a=a;this.b=b;this.n=c}window.Vector=g;function k(a){console.log("origine: "+a.a+" sens: "+a.b+" norme: "+a.n)}window.logVector=k;window.logVector=k;function l(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}window.vectorproduct=l;function m(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}window.scalarproduct=m;
window.multiplymatrix=function(a,b){var c=[];c.length=16;var e,d,f;for(d=0;4>d;d++)for(e=0;4>e;e++)for(f=c[e+4*d]=0;4>f;f++)c[e+4*d]+=a[f+4*d]*b[e+4*f];return c};window.applypersp=function(a){var b=$.extend(!0,[],a);b[0]=viewangle/a[2]*a[0];b[1]=viewangle/a[2]*a[1];b[2]=a[2];return b};window.applymat=function(a,b){var c=$.extend(!0,[],b);c[0]=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3];c[1]=a[4]*b[0]+a[5]*b[1]+a[6]*b[2]+a[7];c[2]=a[8]*b[0]+a[9]*b[1]+a[10]*b[2]+a[11];return c};
window.applymatNpersp=function(a,b){var c=[];c.c=3;c[2]=a[8]*b[0]+a[9]*b[1]+a[10]*b[2]+a[11];c[0]=viewangle/c[2]*(a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]);c[1]=viewangle/c[2]*(a[4]*b[0]+a[5]*b[1]+a[6]*b[2]+a[7]);return c};function n(){var a=[];a.length=16;var b,c;for(b=0;4>b;b++)for(c=0;4>c;c++)a[b+4*c]=b==c?1:0;return a}window.genimat=n;window.gentmat=function(a,b,c){var e=n();e[3]=a;e[7]=b;e[11]=c;return e};
window.genrmat=function(a,b,c){a*=Math.PI/180;var e=Math.PI/180*b,d=Math.PI/180*c;c=n();b=Math.cos(a);a=Math.sin(a);var f=Math.cos(e),e=Math.sin(e),h=Math.cos(d),d=Math.sin(d),p=b*e,q=a*e;c[0]=f*h;c[1]=-f*d;c[2]=-e;c[4]=-q*h+b*d;c[5]=q*d+b*h;c[6]=-a*f;c[8]=p*h+a*d;c[9]=-p*d+a*h;c[10]=b*f;c[3]=c[7]=c[11]=c[12]=c[13]=c[14]=0;c[15]=1;return c};
window.vectfromvertices=function(a,b){var c=Math.sqrt((b[0]-a[0])*(b[0]-a[0])+(b[1]-a[1])*(b[1]-a[1])+(b[2]-a[2])*(b[2]-a[2]));return new g(a,[(b[0]-a[0])/c,(b[1]-a[1])/c,(b[2]-a[2])/c],c)};
